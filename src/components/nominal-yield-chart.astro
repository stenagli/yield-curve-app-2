---
import { fetchNominalData } from '../utils';
import { YieldData } from '../utils';

const csvData = await fetchNominalData();
const yieldData = new YieldData(csvData);
const label = yieldData.latestLabel();
const data = yieldData.latestData();
---
<div>
  <canvas
      id='nominal-yield-chart'
      data-label={label}
      data-data={JSON.stringify(data)}
      >
  </canvas>
</div>

<script>
  import makeChart from '../makeChart.ts';

  const ctx = document.getElementById("nominal-yield-chart");

  makeChart({
    ctx,
    title: 'Nominal Yields',
    borderColor: 'rgb(255, 99, 132)',
  });
</script>
